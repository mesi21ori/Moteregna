(()=>{var e={};e.id=5544,e.ids=[5544],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},95069:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(45587),a(13321),a(36710),a(35866);var r=a(23191),t=a(88716),l=a(37922),i=a.n(l),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let o=["",{children:["dashboard",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,45587)),"C:\\Users\\hp\\Desktop\\gibemarket\\Moteregna\\new\\Moteregna\\app\\dashboard\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,13321)),"C:\\Users\\hp\\Desktop\\gibemarket\\Moteregna\\new\\Moteregna\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,36710)),"C:\\Users\\hp\\Desktop\\gibemarket\\Moteregna\\new\\Moteregna\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\hp\\Desktop\\gibemarket\\Moteregna\\new\\Moteregna\\app\\dashboard\\profile\\page.tsx"],m="/dashboard/profile/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/profile/page",pathname:"/dashboard/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},94957:(e,s,a)=>{Promise.resolve().then(a.bind(a,60222))},60222:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>M});var r=a(10326),t=a(90772),l=a(33071),i=a(28758),n=a(35047),d=a(17577),o=a(79635),c=a(62881);let m=(0,c.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var u=a(37358),x=a(77636),p=a(69508);let h=(0,c.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=a(94019),g=a(45079),N=a(567),j=a(77863);function v({className:e,...s}){return r.jsx("div",{className:(0,j.cn)("animate-pulse rounded-md bg-muted",e),...s})}var b=a(54432),y=a(31048),w=a(79210),k=a(34789),P=a(77083);function M(){var e;let s=(0,n.useRouter)(),[a,c]=(0,d.useState)(null),[j,M]=(0,d.useState)(!0),[C,_]=(0,d.useState)(null),[S,U]=(0,d.useState)(!1),[A,F]=(0,d.useState)({firstName:"",middleName:"",lastName:"",phone:""}),[q,z]=(0,d.useState)(!1),Z=e=>{if(!e)return"Not provided";try{return(0,g.WU)(new Date(e),"PPP")}catch(e){return"Invalid date"}},E=e=>{let{name:s,value:a}=e.target;F(e=>({...e,[s]:a}))},I=async()=>{try{if(z(!0),!A.firstName.trim()||!A.lastName.trim()||!A.phone.trim()){(0,k.Am)({title:"Validation Error",description:"First name, last name, and phone are required",variant:"destructive"});return}let e=await fetch("/getdata/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)}),s=await e.json();if(s.success){if(a){let e=`${A.firstName} ${A.middleName?A.middleName+" ":""}${A.lastName}`;c({...a,firstName:A.firstName,middleName:A.middleName,lastName:A.lastName,name:e,phone:A.phone})}(0,k.Am)({title:"Profile Updated",description:"Your profile has been updated successfully"}),U(!1)}else throw Error(s.message||"Failed to update profile")}catch(e){console.error("Error updating profile:",e),(0,k.Am)({title:"Update Failed",description:e.message||"An error occurred while updating your profile",variant:"destructive"})}finally{z(!1)}};return(0,r.jsxs)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:[r.jsx(P.x,{}),(0,r.jsxs)(l.Zb,{className:"w-full max-w-md",children:[r.jsx(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Profile Information"}),!j&&a&&r.jsx(N.C,{className:(e=>{switch(e){case"SUPERADMIN":return"bg-red-500";case"ADMIN":return"bg-blue-500";case"MOTORIST":return"bg-green-500";case"CUSTOMER":return"bg-yellow-500";default:return"bg-gray-500"}})(a.role),children:a.role})]})}),r.jsx(l.aY,{children:j?(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx(v,{className:"h-24 w-24 rounded-full"}),(0,r.jsxs)("div",{className:"grid w-full gap-4",children:[r.jsx(v,{className:"h-10 w-full"}),r.jsx(v,{className:"h-10 w-full"}),r.jsx(v,{className:"h-10 w-full"}),r.jsx(v,{className:"h-10 w-full"}),r.jsx(v,{className:"h-10 w-full"})]}),r.jsx(v,{className:"h-10 w-full"})]}):C?(0,r.jsxs)("div",{className:"text-center text-red-500 p-4",children:[r.jsx("p",{children:C}),r.jsx(t.z,{className:"mt-4",onClick:()=>s.back(),children:"Go Back"})]}):a?r.jsx(w.mQ,{defaultValue:"profile",className:"w-full",children:r.jsx(w.nU,{value:"profile",className:"mt-4",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)(i.qE,{className:"h-24 w-24",children:[r.jsx(i.F$,{src:a.profilePhoto||"/placeholder.svg",alt:a.name}),r.jsx(i.Q5,{children:(e=a.name)?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"U"})]}),S?(0,r.jsxs)("div",{className:"w-full space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(y._,{htmlFor:"firstName",children:"First Name"}),r.jsx(b.I,{id:"firstName",name:"firstName",value:A.firstName,onChange:E})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(y._,{htmlFor:"middleName",children:"Middle Name (Optional)"}),r.jsx(b.I,{id:"middleName",name:"middleName",value:A.middleName,onChange:E})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(y._,{htmlFor:"lastName",children:"Last Name"}),r.jsx(b.I,{id:"lastName",name:"lastName",value:A.lastName,onChange:E})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(y._,{htmlFor:"phone",children:"Phone"}),r.jsx(b.I,{id:"phone",name:"phone",value:A.phone,onChange:E})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(t.z,{className:"flex-1",onClick:I,disabled:q,children:q?(0,r.jsxs)(r.Fragment,{children:[r.jsx(v,{className:"h-4 w-4 mr-2 rounded-full"})," Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(h,{className:"mr-2 h-4 w-4"})," Save"]})}),(0,r.jsxs)(t.z,{variant:"outline",className:"flex-1",onClick:()=>U(!1),children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4"})," Cancel"]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-bold",children:a.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Member since ",Z(a.createdAt)]})]}),(0,r.jsxs)("div",{className:"grid w-full gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(o.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Full Name"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a.name})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(m,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Phone"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a.phone})]})]}),a.birthdate&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Birthdate"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Z(a.birthdate)})]})]}),a.address&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(x.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Address"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a.address})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 rounded-full bg-green-500"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Status"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a.status})]})]})]}),(0,r.jsxs)("div",{className:"flex w-full gap-2",children:[(0,r.jsxs)(t.z,{className:"flex-1",onClick:()=>U(!0),children:[r.jsx(p.Z,{className:"mr-2 h-4 w-4"})," Edit Profile"]}),r.jsx(t.z,{variant:"outline",className:"flex-1",onClick:()=>s.back(),children:"Close"})]})]})]})})}):null})]})]})}},567:(e,s,a)=>{"use strict";a.d(s,{C:()=>n});var r=a(10326);a(17577);var t=a(79360),l=a(77863);let i=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return r.jsx("div",{className:(0,l.cn)(i({variant:s}),e),...a})}},79210:(e,s,a)=>{"use strict";a.d(s,{SP:()=>o,dr:()=>d,mQ:()=>n,nU:()=>c});var r=a(10326),t=a(17577),l=a(49299),i=a(77863);let n=l.fC,d=t.forwardRef(({className:e,...s},a)=>r.jsx(l.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=l.aV.displayName;let o=t.forwardRef(({className:e,...s},a)=>r.jsx(l.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=l.xz.displayName;let c=t.forwardRef(({className:e,...s},a)=>r.jsx(l.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=l.VY.displayName},77636:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(62881).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},69508:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},45587:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\hp\Desktop\gibemarket\Moteregna\new\Moteregna\app\dashboard\profile\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[9276,232,187,9299,1516,9679,2728,8370],()=>a(95069));module.exports=r})();