(()=>{var e={};e.id=9863,e.ids=[9863],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28856:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>o}),t(88738),t(13321),t(12734),t(35866);var s=t(23191),r=t(88716),i=t(37922),n=t.n(i),l=t(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(a,d);let o=["",{children:["dashboard",{children:["pricing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,88738)),"C:\\Users\\malin\\OneDrive\\Desktop\\new2\\Moteregna\\app\\dashboard\\pricing\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,24911)),"C:\\Users\\malin\\OneDrive\\Desktop\\new2\\Moteregna\\app\\dashboard\\pricing\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"C:\\Users\\malin\\OneDrive\\Desktop\\new2\\Moteregna\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,12734)),"C:\\Users\\malin\\OneDrive\\Desktop\\new2\\Moteregna\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\malin\\OneDrive\\Desktop\\new2\\Moteregna\\app\\dashboard\\pricing\\page.tsx"],p="/dashboard/pricing/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/pricing/page",pathname:"/dashboard/pricing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},33320:(e,a,t)=>{Promise.resolve().then(t.bind(t,79168))},35303:()=>{},79168:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(10326),r=t(17577),i=t(90772),n=t(33071),l=t(54432),d=t(15940),o=t(62288),c=t(92397),p=t(567),u=t(88307),m=t(79635),f=t(69508),x=t(35047),g=t(85999);function h(){let e=(0,x.useRouter)(),[a,t]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),[y,N]=(0,r.useState)(""),[w,P]=(0,r.useState)(""),[k,C]=(0,r.useState)([]),[S,D]=(0,r.useState)(!0),[R,_]=(0,r.useState)({page:1,limit:10,total:0,totalPages:1}),M=async()=>{try{D(!0);let e=await fetch(`/api/prices/history?page=${R.page}&limit=${R.limit}&search=${a}`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch pricing data");let{data:t,pagination:s}=await e.json();C(t),_(s)}catch(a){g.Am.error(a instanceof Error?a.message:"Failed to load pricing data"),a instanceof Error&&a.message.includes("Unauthorized")&&e.push("/sginin")}finally{D(!1)}},z=e=>{_(a=>({...a,page:e}))},T=e=>{v(e),N(e.basePrice.toString()),P(e.perKmPrice.toString()),b(!0)},E=async()=>{if(j)try{if(!(await fetch("/api/prices",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({basePrice:Number(y),perKmPrice:Number(w)})})).ok)throw Error("Failed to update pricing");g.Am.success("Pricing updated successfully"),M(),b(!1)}catch(e){g.Am.error(e instanceof Error?e.message:"Failed to update pricing")}},Z=k.filter(e=>e.updatedBy.toLowerCase().includes(a.toLowerCase()));return S&&0===k.length?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Pricing History"}),(0,s.jsxs)("div",{className:"relative w-full sm:w-64",children:[s.jsx(u.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(l.I,{placeholder:"Search by updated by...",className:"pl-8",value:a,onChange:e=>{t(e.target.value),_(e=>({...e,page:1}))}})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[s.jsx(n.ll,{children:"Price List"}),s.jsx(n.SZ,{children:"View and update pricing history"})]}),(0,s.jsxs)(n.aY,{children:[s.jsx("div",{className:"rounded-md border overflow-hidden",children:(0,s.jsxs)(d.iA,{children:[s.jsx(d.xD,{children:(0,s.jsxs)(d.SC,{children:[s.jsx(d.ss,{children:"Base Price"}),s.jsx(d.ss,{children:"Per KM Price"}),s.jsx(d.ss,{children:"Created"}),s.jsx(d.ss,{children:"Last Updated"}),s.jsx(d.ss,{children:"Updated By"}),s.jsx(d.ss,{className:"text-right",children:"Actions"})]})}),s.jsx(d.RM,{children:Z.length>0?Z.map(e=>(0,s.jsxs)(d.SC,{children:[(0,s.jsxs)(d.pj,{children:[e.basePrice.toFixed(2)," ETB"]}),(0,s.jsxs)(d.pj,{children:["ETB ",e.perKmPrice.toFixed(2),"/km"]}),s.jsx(d.pj,{children:s.jsx(p.C,{variant:"outline",children:new Date(e.createdAt).toLocaleDateString()})}),s.jsx(d.pj,{children:s.jsx(p.C,{variant:"outline",children:new Date(e.updatedAt).toLocaleDateString()})}),s.jsx(d.pj,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(m.Z,{className:"mr-2 h-4 w-4 text-primary"}),e.updatedBy]})}),s.jsx(d.pj,{className:"text-right",children:(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>T(e),children:[s.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})})]},e.id)):s.jsx(d.SC,{children:s.jsx(d.pj,{colSpan:6,className:"h-24 text-center",children:"No pricing data found."})})})]})}),R.totalPages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 pt-4",children:[s.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>z(R.page-1),disabled:1===R.page,children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",R.page," of ",R.totalPages]}),s.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>z(R.page+1),disabled:R.page===R.totalPages,children:"Next"})]})]})]}),s.jsx(o.Vq,{open:h,onOpenChange:b,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[s.jsx(o.$N,{children:"Update Pricing"}),s.jsx(o.Be,{children:"Set new base price and per kilometer rate"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(c._,{htmlFor:"basePrice",children:"Base Price (ETB)"}),s.jsx(l.I,{id:"basePrice",type:"number",step:"0.01",min:"0",value:y,onChange:e=>N(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(c._,{htmlFor:"perKmPrice",children:"Per KM Price (ETB)"}),s.jsx(l.I,{id:"perKmPrice",type:"number",step:"0.01",min:"0",value:w,onChange:e=>P(e.target.value)})]})]}),(0,s.jsxs)(o.cN,{children:[s.jsx(i.z,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),s.jsx(i.z,{onClick:E,children:"Save Changes"})]})]})})]})}},567:(e,a,t)=>{"use strict";t.d(a,{C:()=>l});var s=t(10326);t(17577);var r=t(79360),i=t(77863);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,...t}){return s.jsx("div",{className:(0,i.cn)(n({variant:a}),e),...t})}},62288:(e,a,t)=>{"use strict";t.d(a,{$N:()=>x,Be:()=>g,Vq:()=>d,cN:()=>f,cZ:()=>u,fK:()=>m,hg:()=>o});var s=t(10326),r=t(17577),i=t(73267),n=t(94019),l=t(77863);let d=i.fC,o=r.forwardRef(({className:e,children:a,...t},r)=>s.jsx(i.xz,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",e),...t,children:a}));o.displayName=i.xz.displayName;let c=i.h_;i.x8;let p=r.forwardRef(({className:e,...a},t)=>s.jsx(i.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));p.displayName=i.aV.displayName;let u=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(c,{children:[s.jsx(p,{}),(0,s.jsxs)(i.VY,{ref:r,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(n.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=i.VY.displayName;let m=({className:e,...a})=>s.jsx("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let f=({className:e,...a})=>s.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});f.displayName="DialogFooter";let x=r.forwardRef(({className:e,...a},t)=>s.jsx(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));x.displayName=i.Dx.displayName;let g=r.forwardRef(({className:e,...a},t)=>s.jsx(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));g.displayName=i.dk.displayName},54432:(e,a,t)=>{"use strict";t.d(a,{I:()=>n});var s=t(10326),r=t(17577),i=t(77863);let n=r.forwardRef(({className:e,type:a,...t},r)=>s.jsx("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Input"},92397:(e,a,t)=>{"use strict";t.d(a,{_:()=>p});var s=t(10326),r=t(17577);t(60962);var i=t(34214),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let t=r.forwardRef((e,t)=>{let{asChild:r,...n}=e,l=r?i.g7:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(l,{...n,ref:t})});return t.displayName=`Primitive.${a}`,{...e,[a]:t}},{}),l=r.forwardRef((e,a)=>(0,s.jsx)(n.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var d=t(79360),o=t(77863);let c=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=r.forwardRef(({className:e,...a},t)=>s.jsx(l,{ref:t,className:(0,o.cn)(c(),e),...a}));p.displayName=l.displayName},15940:(e,a,t)=>{"use strict";t.d(a,{RM:()=>d,SC:()=>o,iA:()=>n,pj:()=>p,ss:()=>c,xD:()=>l});var s=t(10326),r=t(17577),i=t(77863);let n=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...a})}));n.displayName="Table";let l=r.forwardRef(({className:e,...a},t)=>s.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...a}));l.displayName="TableHeader";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...a}));d.displayName="TableBody",r.forwardRef(({className:e,...a},t)=>s.jsx("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let o=r.forwardRef(({className:e,...a},t)=>s.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));o.displayName="TableRow";let c=r.forwardRef(({className:e,...a},t)=>s.jsx("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));c.displayName="TableHead";let p=r.forwardRef(({className:e,...a},t)=>s.jsx("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));p.displayName="TableCell",r.forwardRef(({className:e,...a},t)=>s.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},88307:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},69508:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},79635:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24911:(e,a,t)=>{"use strict";function s(){return null}t.r(a),t.d(a,{default:()=>s})},88738:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\malin\OneDrive\Desktop\new2\Moteregna\app\dashboard\pricing\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[1448,8270,6447,5999,8149],()=>t(28856));module.exports=s})();