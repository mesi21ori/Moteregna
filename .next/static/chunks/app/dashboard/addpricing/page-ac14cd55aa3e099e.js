(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{71930:function(e,r,t){Promise.resolve().then(t.bind(t,38417))},38417:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var n=t(57437),i=t(2265),s=t(62869),a=t(66070),l=t(95186),o=t(5222),d=t(99376),c=t(73578),u=t(35974),f=t(92369),m=t(14438);function p(){let e=(0,d.useRouter)(),[r,t]=(0,i.useState)({basePrice:"",perKmPrice:""}),[p,x]=(0,i.useState)([]),[b,h]=(0,i.useState)(!0),[g,v]=(0,i.useState)("");(0,i.useEffect)(()=>{j(),y()},[]);let j=async()=>{try{h(!0);let e=await fetch("/api/prices/user-history",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch pricing history");let{data:r}=await e.json();x(r)}catch(r){m.Am.error(r instanceof Error?r.message:"Failed to load pricing history"),r instanceof Error&&r.message.includes("Unauthorized")&&e.push("/login")}finally{h(!1)}},y=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let{user:r}=await e.json();v("".concat(r.firstName," ").concat(r.lastName))}}catch(e){console.error("Failed to fetch user data:",e)}},N=e=>{let{name:r,value:n}=e.target;t(e=>({...e,[r]:n}))},w=async e=>{e.preventDefault();try{let e=await fetch("/api/prices/addnew",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({basePrice:Number(r.basePrice),perKmPrice:Number(r.perKmPrice)})});if(!e.ok){let r=await e.json();throw Error(r.message||"Failed to create pricing")}let{data:n}=await e.json();x(e=>[n,...e]),t({basePrice:"",perKmPrice:""}),m.Am.success("Pricing created successfully")}catch(e){m.Am.error(e instanceof Error?e.message:"Failed to create pricing")}};return b&&0===p.length?(0,n.jsx)("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Add New Pricing"})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Your Pricing History"}),(0,n.jsx)(a.SZ,{children:"Recent pricing you've created"})]}),(0,n.jsx)(a.aY,{children:(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(c.iA,{children:[(0,n.jsx)(c.xD,{children:(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.ss,{children:"Base Price"}),(0,n.jsx)(c.ss,{children:"Per KM Price"}),(0,n.jsx)(c.ss,{children:"Created"}),(0,n.jsx)(c.ss,{children:"Updated By"})]})}),(0,n.jsx)(c.RM,{children:p.length>0?p.map(e=>(0,n.jsxs)(c.SC,{children:[(0,n.jsxs)(c.pj,{children:[e.basePrice.toFixed(2)," ETB"]}),(0,n.jsxs)(c.pj,{children:[e.perKmPrice.toFixed(2)," ETB"]}),(0,n.jsx)(c.pj,{children:(0,n.jsx)(u.C,{variant:"outline",children:e.createdAt})}),(0,n.jsx)(c.pj,{children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4 text-primary"}),e.updatedBy]})})]},e.id)):(0,n.jsx)(c.SC,{children:(0,n.jsx)(c.pj,{colSpan:4,className:"h-24 text-center",children:"No pricing history found"})})})]})})})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Create New Pricing"}),(0,n.jsx)(a.SZ,{children:"Add new base and per kilometer pricing"})]}),(0,n.jsx)(a.aY,{children:(0,n.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(o._,{htmlFor:"basePrice",children:"Base Price (ETB)"}),(0,n.jsx)(l.I,{id:"basePrice",name:"basePrice",type:"number",step:"0.01",min:"0",placeholder:"10.00",value:r.basePrice,onChange:N,required:!0})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(o._,{htmlFor:"perKmPrice",children:"Per Kilometer Price (ETB)"}),(0,n.jsx)(l.I,{id:"perKmPrice",name:"perKmPrice",type:"number",step:"0.01",min:"0",placeholder:"2.50",value:r.perKmPrice,onChange:N,required:!0})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,n.jsx)(s.z,{type:"button",variant:"outline",onClick:()=>{t({basePrice:"",perKmPrice:""})},children:"Clear"}),(0,n.jsx)(s.z,{type:"submit",children:"Create Pricing"})]})]})})]})]})]})}},35974:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var n=t(57437);t(2265);var i=t(90535),s=t(94508);let a=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)(a({variant:t}),r),...i})}},62869:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var n=t(57437),i=t(2265),s=t(37053),a=t(90535),l=t(94508);let o=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,r)=>{let{className:t,variant:i,size:a,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:i,size:a,className:t})),ref:r,...c})});d.displayName="Button"},66070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return a},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var n=t(57437),i=t(2265),s=t(94508);let a=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});a.displayName="Card";let l=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});o.displayName="CardTitle";let d=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...i})});d.displayName="CardDescription";let c=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...i})});c.displayName="CardContent";let u=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...i})});u.displayName="CardFooter"},95186:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var n=t(57437),i=t(2265),s=t(94508);let a=i.forwardRef((e,r)=>{let{className:t,type:i,...a}=e;return(0,n.jsx)("input",{type:i,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a})});a.displayName="Input"},5222:function(e,r,t){"use strict";t.d(r,{_:function(){return u}});var n=t(57437),i=t(2265);t(54887);var s=t(37053),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=i.forwardRef((e,t)=>{let{asChild:i,...a}=e,l=i?s.g7:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...a,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{}),l=i.forwardRef((e,r)=>(0,n.jsx)(a.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l.displayName="Label";var o=t(90535),d=t(94508);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)(l,{ref:r,className:(0,d.cn)(c(),t),...i})});u.displayName=l.displayName},73578:function(e,r,t){"use strict";t.d(r,{RM:function(){return o},SC:function(){return d},iA:function(){return a},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var n=t(57437),i=t(2265),s=t(94508);let a=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",t),...i})})});a.displayName="Table";let l=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",t),...i})});l.displayName="TableHeader";let o=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",t),...i})});o.displayName="TableBody",i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...i})}).displayName="TableFooter";let d=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...i})});d.displayName="TableRow";let c=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...i})});c.displayName="TableHead";let u=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...i})});u.displayName="TableCell",i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",t),...i})}).displayName="TableCaption"},94508:function(e,r,t){"use strict";t.d(r,{cn:function(){return s}});var n=t(61994),i=t(53335);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.m6)((0,n.W)(r))}},92369:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},90535:function(e,r,t){"use strict";t.d(r,{j:function(){return a}});var n=t(61994);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=n.W,a=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:a,defaultVariants:l}=r,o=Object.keys(a).map(e=>{let r=null==t?void 0:t[e],n=null==l?void 0:l[e];if(null===r)return null;let s=i(r)||i(n);return a[e][s]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return s(e,o,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...i}=r;return Object.entries(i).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...d}[r]):({...l,...d})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[317,30,971,117,744],function(){return e(e.s=71930)}),_N_E=e.O()}]);