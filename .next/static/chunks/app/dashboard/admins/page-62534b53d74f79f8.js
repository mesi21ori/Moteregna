(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{72441:function(e,s,a){Promise.resolve().then(a.bind(a,94469))},94469:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(57437),n=a(2265),r=a(62869),i=a(66070),d=a(95186),l=a(26815),c=a(73578),o=a(26110),m=a(84190),h=a(79205);let u=(0,h.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var f=a(67782),p=a(15868);let x=(0,h.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var j=a(35974),y=a(99376),N=a(14438);function g(){let e=(0,y.useRouter)(),[s,a]=(0,n.useState)([]),[h,g]=(0,n.useState)(!0),[v,w]=(0,n.useState)(!1),[b,A]=(0,n.useState)({firstName:"",lastName:"",phone:"",password:""});(0,n.useEffect)(()=>{k()},[]);let k=async()=>{try{g(!0);let e=await fetch("/api/admin/list_of_admin",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch admins");let{data:s}=await e.json();a(s)}catch(s){N.Am.error(s instanceof Error?s.message:"Failed to load admins"),s instanceof Error&&s.message.includes("Unauthorized")&&e.push("/login")}finally{g(!1)}},C=e=>{let{name:s,value:a}=e.target;A(e=>({...e,[s]:a}))},_=async e=>{e.preventDefault();try{let e=await fetch("/api/admin/add_admin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!e.ok){let s=await e.json();throw Error(s.message||"Failed to create admin")}N.Am.success("Admin created successfully"),A({firstName:"",lastName:"",phone:"",password:""}),w(!1),k()}catch(e){N.Am.error(e instanceof Error?e.message:"Failed to create admin")}},E=async e=>{try{if(!(await fetch("/api/admin/delete",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e})})).ok)throw Error("Failed to delete admin");a(s.filter(s=>s.Phone!==e)),N.Am.success("Admin deleted successfully")}catch(e){N.Am.error(e instanceof Error?e.message:"Failed to delete admin")}},F=async(e,t)=>{try{if(!(await fetch("/api/admin/status",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e,status:"Active"!==t})})).ok)throw Error("Failed to update admin status");a(s.map(s=>s.Phone===e?{...s,Status:"Active"===t?"Inactive":"Active"}:s)),N.Am.success("Admin ".concat("Active"===t?"deactivated":"activated"," successfully"))}catch(e){N.Am.error(e instanceof Error?e.message:"Failed to update status")}};return h?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Admin Management"}),(0,t.jsxs)(o.Vq,{open:v,onOpenChange:w,children:[(0,t.jsx)(o.hg,{asChild:!0,children:(0,t.jsxs)(r.z,{children:[(0,t.jsx)(u,{className:"mr-2 h-4 w-4"}),"Add Admin"]})}),(0,t.jsxs)(o.cZ,{children:[(0,t.jsxs)(o.fK,{children:[(0,t.jsx)(o.$N,{children:"Create New Admin"}),(0,t.jsx)(o.Be,{children:"Add a new admin user to the system. They will receive login credentials."})]}),(0,t.jsxs)("form",{onSubmit:_,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l._,{htmlFor:"firstName",children:"First Name"}),(0,t.jsx)(d.I,{id:"firstName",name:"firstName",value:b.firstName,onChange:C,placeholder:"Enter first name",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l._,{htmlFor:"lastName",children:"Last Name"}),(0,t.jsx)(d.I,{id:"lastName",name:"lastName",value:b.lastName,onChange:C,placeholder:"Enter last name",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l._,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsx)(d.I,{id:"phone",name:"phone",value:b.phone,onChange:C,placeholder:"Enter phone number",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l._,{htmlFor:"password",children:"Password"}),(0,t.jsx)(d.I,{id:"password",name:"password",type:"password",value:b.password,onChange:C,placeholder:"Enter password",required:!0})]})]}),(0,t.jsx)(o.cN,{children:(0,t.jsx)(r.z,{type:"submit",children:"Create Admin"})})]})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[(0,t.jsx)(i.ll,{children:"Admin Users"}),(0,t.jsx)(i.SZ,{children:"Manage admin users and their permissions"})]}),(0,t.jsx)(i.aY,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(c.iA,{children:[(0,t.jsx)(c.xD,{children:(0,t.jsxs)(c.SC,{children:[(0,t.jsx)(c.ss,{children:"Name"}),(0,t.jsx)(c.ss,{children:"Phone"}),(0,t.jsx)(c.ss,{children:"Status"}),(0,t.jsx)(c.ss,{children:"Created"}),(0,t.jsx)(c.ss,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(c.RM,{children:s.map((e,s)=>(0,t.jsxs)(c.SC,{children:[(0,t.jsx)(c.pj,{className:"font-medium",children:e.Name}),(0,t.jsx)(c.pj,{children:e.Phone}),(0,t.jsx)(c.pj,{children:(0,t.jsx)(j.C,{variant:"Active"===e.Status?"default":"secondary",children:e.Status})}),(0,t.jsx)(c.pj,{children:e.Created}),(0,t.jsx)(c.pj,{className:"text-right",children:(0,t.jsxs)(m.h_,{children:[(0,t.jsx)(m.$F,{asChild:!0,children:(0,t.jsxs)(r.z,{variant:"ghost",size:"icon",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,t.jsxs)(m.AW,{align:"end",children:[(0,t.jsx)(m.Ju,{children:"Actions"}),(0,t.jsx)(m.VD,{}),(0,t.jsxs)(m.Xi,{children:[(0,t.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsx)(m.Xi,{onClick:()=>F(e.Phone,e.Status),children:"Active"===e.Status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2",children:"\uD83D\uDEAB"}),"Deactivate"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2",children:"âœ…"}),"Activate"]})}),(0,t.jsxs)(m.Xi,{onClick:()=>E(e.Phone),children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},"".concat(e.Phone,"-").concat(s)))})]})})})]})]})}},84190:function(e,s,a){"use strict";a.d(s,{$F:function(){return m},AW:function(){return h},Ju:function(){return f},VD:function(){return p},Xi:function(){return u},h_:function(){return o}});var t=a(57437),n=a(2265),r=a(16268),i=a(10407),d=a(30401),l=a(40519),c=a(94508);let o=r.fC,m=r.xz;r.ZA,r.Uv,r.Tr,r.Ee,n.forwardRef((e,s)=>{let{className:a,inset:n,children:d,...l}=e;return(0,t.jsxs)(r.fF,{ref:s,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...l,children:[d,(0,t.jsx)(i.Z,{className:"ml-auto"})]})}).displayName=r.fF.displayName,n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.tu,{ref:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=r.tu.displayName;let h=n.forwardRef((e,s)=>{let{className:a,sideOffset:n=4,...i}=e;return(0,t.jsx)(r.Uv,{children:(0,t.jsx)(r.VY,{ref:s,sideOffset:n,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});h.displayName=r.VY.displayName;let u=n.forwardRef((e,s)=>{let{className:a,inset:n,...i}=e;return(0,t.jsx)(r.ck,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...i})});u.displayName=r.ck.displayName,n.forwardRef((e,s)=>{let{className:a,children:n,checked:i,...l}=e;return(0,t.jsxs)(r.oC,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})}),n]})}).displayName=r.oC.displayName,n.forwardRef((e,s)=>{let{className:a,children:n,...i}=e;return(0,t.jsxs)(r.Rk,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(l.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=r.Rk.displayName;let f=n.forwardRef((e,s)=>{let{className:a,inset:n,...i}=e;return(0,t.jsx)(r.__,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...i})});f.displayName=r.__.displayName;let p=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});p.displayName=r.Z0.displayName},67782:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])}},function(e){e.O(0,[181,793,799,732,940,347,587,971,117,744],function(){return e(e.s=72441)}),_N_E=e.O()}]);